{% load manage_template_tags polymorphic_formset_tags core_tags static sekizai_tags %}

<!--<div class="FM_formset" FM-Type="LESSONS" FM-Prefix="{{formset.prefix}}">-->
<div class="FM_formset" FM-Type="{{ formset_type }}" FM-Prefix="{{ formset.prefix }}">
    <div class="FM_formset_errors">{{ formset.non_form_errors }}</div>

    <!--potentially dont want to supply empty mgmt form if not already an instance -->
    <!--i.e. if formset.prefix-->
    <div class="FM_mgmt_form">{{ formset.management_form }}</div>

    <div class="FM_formset_forms" FM-Type="{{ formset_type }}">

        {% for lesson_form in formset %}

                <div class="FM_form" FM-Type="{{formset_type}}">
                    <div class="FM_form_content">
                        <div class="FM_form_errors form_error_container">{{lesson_form.errors}}</div>

                        {% show_lesson_form lesson_form sections_fs=lesson_form.child_sections sub_lessons_fs=lesson_form.sub_lessons %}

                    </div>
                </div>
        {% endfor lesson_loop %}
    </div>
</div>
